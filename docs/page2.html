<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate-key="site_title">CropConnect</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style2.css" />
    <link rel="stylesheet" href="style.css"> <!-- Link to main style for switcher -->
</head>
<body>
    <header class="page-header">
        <div class="language-switcher-container top-right">
            <i class="fa-solid fa-language"></i>
            <select id="language-switcher">
                <option value="en">English</option>
                <option value="hi">हिन्दी</option>
                <option value="ml">മലയാളം</option>
            </select>
        </div>
        <a href="index.html" class="home-link">
            <h2 data-translate-key="site_title"><i class="fa-solid fa-leaf"></i> CropConnect</h2>
        </a>
        <h1 id="search-title" data-translate-key="market_report_title">Market Report</h1>
    </header>
    <div id="ai-summary-container" class="ai-summary-container hidden">
        <h3 data-translate-key="ai_summary_title"><i class="fa-solid fa-wand-magic-sparkles"></i> AI Market Report</h3>
        <div id="ai-summary-content" class="ai-summary-content">
            <div class="summary-loader"></div>
        </div>
    </div>
    <div class="filter-controls">
        <div class="filter-group">
            <label for="state-filter" data-translate-key="filter_by_state">Filter by State:</label>
            <select id="state-filter">
                <option value="" data-translate-key="all_states">All States</option>
            </select>
        </div>
        <button id="apply-filters-btn" data-translate-key="apply_button">Apply</button>
    </div>
    <main class="results-container">
        <div id="loader" class="loader"></div>
        <div id="error-message" class="error-message hidden"></div>
        <div id="chart-container" class="chart-container hidden"><canvas id="priceChart"></canvas></div>
        <div id="table-container" class="table-container hidden">
            <h3 data-translate-key="table_title">Detailed Price Comparison</h3>
            <table class="results-table">
                <thead>
                    <tr>
                        <th data-sort="market" data-translate-key="market_header">Market <i class="fa-solid fa-sort"></i></th>
                        <th data-sort="state" data-translate-key="state_header">State <i class="fa-solid fa-sort"></i></th>
                        <th data-sort="min_price" data-translate-key="min_price_header">Min Price (₹) <i class="fa-solid fa-sort"></i></th>
                        <th data-sort="max_price" data-translate-key="max_price_header">Max Price (₹) <i class="fa-solid fa-sort"></i></th>
                        <th data-sort="modal_price" data-translate-key="modal_price_header">Modal Price (₹) <i class="fa-solid fa-sort"></i></th>
                    </tr>
                </thead>
                <tbody id="priceTableBody"></tbody>
            </table>
        </div>
    </main>
    <footer>
        <p data-translate-key="footer_text">&copy; 2025 CropConnect. All rights reserved.</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="translations.js"></script>
    <script src="language.js"></script>
    <script src="script.js"></script>
</body>
</html>